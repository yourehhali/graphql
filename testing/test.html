<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>SVG Bar Chart with Tooltip</title>

  <style>
    :root {
      --chart-1: #6366f1;

      --card: hsl(0 0% 100%);
      --card-foreground: hsl(222.2 47.4% 11.2%);

      --tooltip-bg: rgba(0, 0, 0, 0.85);
      --chart-desktop: #6366f1;
      --chart-mobile: #93c5fd;
      --tooltip-fg: white;
      --line: #e5e7eb;
      --text: black;
      --text-muted: gray;
      --body-bg : white;
      --card-border-color: #FFFFFF90;
    }

    .dark {
      --card: hsl(0, 0%, 10%);
      --card-foreground: hsl(210 40% 98%);

      --tooltip-bg: rgba(255, 255, 255, 0.85);
      --tooltip-fg: black;
      --line: #e5e7eb38;
      --text: white;
      --text-muted: lightgray;
      --body-bg : black;
      --card-border-color: #2c2c2c90;
    }
    body{
      background-color: var(--body-bg);
    }
    .card {
      background: var(--card);
      color: var(--card-foreground);
      /*width: 640px;*/
      margin: 40px auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid var(--card-border-color);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      font-family: Arial, sans-serif;
    }

    .tooltip {
      position: fixed;
      padding: 6px 10px;
      font-size: 13px;
      border-radius: 6px;
      background: var(--tooltip-bg);
      color: var(--tooltip-fg);
      pointer-events: none;
      opacity: 0;
      transform: translate(-50%, -100%);
      transition: opacity 0.12s ease-out;
      white-space: nowrap;
      z-index: 999999;
    }

    .graphList {
      display: flex;
    }
  </style>
</head>

<body class="dark">

  <div id="tooltip" class="tooltip"></div>
  <div class="graphList">
    <div class="card">
      <div class="cardHeader">
        <h2>Projects XP</h2>
        <p>January – June 2024</p>
      </div>

      <div id="chart-container"></div>

      <div style="margin-top: 16px; font-size: 14px;">
        Trending up by 5.2% this project ⬆️ <br />
        <span style="color: gray">Showing total visitors for last 6 projects</span>
      </div>
    </div>
    <div class="card">
      <div class="cardHeader">
        <h2>Projects XP</h2>
        <p>January – June 2024</p>
      </div>

      <div id="radial-chart" style="width: 260px; margin: 0 auto;"></div>


      <div style="margin-top: 16px; font-size: 14px;">
        Trending up by 5.2% this project ⬆️ <br />
        <span style="color: gray">Showing total visitors for last 6 projects</span>
      </div>
    </div>

  </div>


  <script>
    const data = [
      { project: "go-reloaded", xp: 5 },
      { project: "ascii-art", xp: 7 },
      { project: "ascii-art-web", xp: 15 },
      { project: "groupie-tracker", xp: 20 },
      { project: "net-cat", xp: 24 },
      { project: "lem-in", xp: 50 },
      { project: "forum", xp: 70 },
      { project: "make-your-game", xp: 110 },
    ];

    const width = 600;
    const height = 300;
    const padding = 20;

    const maxValue = Math.max(...data.map(d => d.xp));
    const barWidth = (width - padding * 2) / data.length - 20;

    const svgNS = "http://www.w3.org/2000/svg";
    const svg = document.createElementNS(svgNS, "svg");
    svg.setAttribute("width", width);
    svg.setAttribute("height", height);
    svg.style.background = "var(--card)";
    svg.style.borderRadius = "12px";

    const tooltip = document.getElementById("tooltip");

    [0.25, 0.5, 0.75, 1].forEach(p => {
      const y = height - padding - (height - padding * 2) * p;
      const line = document.createElementNS(svgNS, "line");
      line.setAttribute("x1", padding);
      line.setAttribute("x2", width - padding);
      line.setAttribute("y1", y);
      line.setAttribute("y2", y);
      line.setAttribute("stroke", "var(--line)");
      svg.appendChild(line);
    });

    data.forEach((d, i) => {
      const barHeight = (d.xp / maxValue) * (height - padding * 2);

      const rect = document.createElementNS(svgNS, "rect");
      rect.setAttribute("x", padding + i * (barWidth + 20));
      rect.setAttribute("y", height - padding - barHeight);
      rect.setAttribute("width", barWidth);
      rect.setAttribute("height", barHeight);
      rect.setAttribute("rx", 8);
      rect.setAttribute("fill", "var(--chart-1)");
      rect.style.cursor = "pointer";

      rect.addEventListener("mouseenter", (e) => {
        tooltip.textContent = `${d.project}: ${d.xp}`;
        tooltip.style.opacity = "1";
      });

      rect.addEventListener("mousemove", (e) => {
        tooltip.style.left = e.clientX + "px";
        tooltip.style.top = e.clientY - 10 + "px";
      });

      rect.addEventListener("mouseleave", () => {
        tooltip.style.opacity = "0";
      });

      svg.appendChild(rect);
    });

    data.forEach((d, i) => {
      const text = document.createElementNS(svgNS, "text");
      text.textContent = d.project.slice(0, 3);

      text.setAttribute(
        "x",
        padding + i * (barWidth + 20) + barWidth / 2
      );
      text.setAttribute("y", height - padding + 20);
      text.setAttribute("text-anchor", "middle");
      text.setAttribute("font-size", "12");
      text.setAttribute("fill", "var(--text-muted)");

      svg.appendChild(text);
    });

    document.getElementById("chart-container").appendChild(svg);
  </script>
  <script>
    const radialData = {
      desktop: 1260,
      mobile: 570,
    };
    const totalVisitors = radialData.desktop + radialData.mobile;

    const size = 200;
    const center = size / 2;

    const strokeWidth = 25;
    const outerRadius = (size / 2) - (strokeWidth / 2);  // SAFE radius
    const innerRadius = outerRadius - strokeWidth;

    const svg2 = document.createElementNS(svgNS, "svg");

    svg2.setAttribute("viewBox", `0 0 ${size} ${size}`);
    svg2.style.width = "100%";
    svg2.style.height = "100%";
    svg2.style.display = "block";
    svg2.style.margin = "0 auto";

    function arcPath(startAngle, endAngle, radius) {
      const sx = center + radius * Math.cos(startAngle);
      const sy = center - radius * Math.sin(startAngle);
      const ex = center + radius * Math.cos(endAngle);
      const ey = center - radius * Math.sin(endAngle);

      return `M ${sx} ${sy} A ${radius} ${radius} 0 0 1 ${ex} ${ey}`;
    }

    const start = Math.PI;
    const end = 0;

    const desktopAngle = start + (end - start) * (radialData.desktop / totalVisitors);
    const mobileAngle = desktopAngle + (end - start) * (radialData.mobile / totalVisitors);

    const desktop = document.createElementNS(svgNS, "path");
    desktop.setAttribute("d", arcPath(start, desktopAngle, outerRadius));
    desktop.setAttribute("stroke", "var(--chart-desktop)");
    desktop.setAttribute("stroke-width", strokeWidth);
    desktop.setAttribute("stroke-linecap", "round");
    desktop.setAttribute("fill", "none");
    svg2.appendChild(desktop);

    const mobile = document.createElementNS(svgNS, "path");
    mobile.setAttribute("d", arcPath(desktopAngle, end, outerRadius));
    mobile.setAttribute("stroke", "var(--chart-mobile)");
    mobile.setAttribute("stroke-width", strokeWidth);
    mobile.setAttribute("stroke-linecap", "round");
    mobile.setAttribute("fill", "none");
    svg2.appendChild(mobile);

    const textTotal = document.createElementNS(svgNS, "text");
    textTotal.setAttribute("x", center);
    textTotal.setAttribute("y", center - 5);
    textTotal.setAttribute("text-anchor", "middle");
    textTotal.setAttribute("font-size", "18");
    textTotal.setAttribute("font-weight", "bold");
    textTotal.setAttribute("fill", "var(--text)");
    textTotal.textContent = totalVisitors.toLocaleString();
    svg2.appendChild(textTotal);

    const label = document.createElementNS(svgNS, "text");
    label.setAttribute("x", center);
    label.setAttribute("y", center+8);
    label.setAttribute("text-anchor", "middle");
    label.setAttribute("font-size", "8");
    label.setAttribute("fill", "var(--text-muted)");
    label.textContent = "Visitors";
    svg2.appendChild(label);

    document.getElementById("radial-chart").appendChild(svg2);
  </script>


</body>

</html>